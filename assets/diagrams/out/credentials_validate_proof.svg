<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1357px" preserveAspectRatio="none" style="width:1282px;height:1357px;background:#FFFFFF;" version="1.1" viewBox="0 0 1282 1357" width="1282px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="26.2969" id="_title" style="stroke:none;stroke-width:1.0;" width="248" x="515.8438" y="15"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="238" x="520.8438" y="32.9951">Public Credential Verification</text><ellipse cx="195.5" cy="57.2969" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="#FFFFFF" height="61.9063" rx="12.5" ry="12.5" style="stroke:#222222;stroke-width:0.5;" width="369" x="11" y="87.2969"/><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="349" x="21" y="108.4355">Receive message MsgIssuePublicVerifiableCredential with</text><text fill="#000000" font-family="sans" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="162" x="21" y="122.4043">CredentialDefinitionID</text><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="8" x="183" y="122.4043">  </text><text fill="#000000" font-family="sans" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="76" x="21" y="136.373">Credential</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#222222;stroke-width:0.5;" width="223" x="84" y="169.2031"/><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" text-decoration="underline" textLength="37" x="94" y="190.3418">Query</text><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="4" x="131" y="190.3418"> </text><text fill="#000000" font-family="sans" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="162" x="135" y="190.3418">CredentialDefinitionID</text><polygon fill="#F1F1F1" points="146,223.1719,245,223.1719,257,235.1719,245,247.1719,146,247.1719,134,235.1719,146,223.1719" style="stroke:#222222;stroke-width:0.5;"/><text fill="#000000" font-family="sans" font-size="11" lengthAdjust="spacing" textLength="99" x="146" y="238.98">Definition exists?</text><text fill="#000000" font-family="sans" font-size="11" lengthAdjust="spacing" textLength="14" x="120" y="232.5776">no</text><text fill="#000000" font-family="sans" font-size="11" lengthAdjust="spacing" textLength="21" x="257" y="232.5776">yes</text><rect fill="#FFC0CB" height="33.9688" rx="12.5" ry="12.5" style="stroke:#222222;stroke-width:0.5;" width="50" x="65.25" y="257.1719"/><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="30" x="75.25" y="278.3105">Error</text><ellipse cx="90.25" cy="321.1406" fill="none" rx="10" ry="10" style="stroke:#222222;stroke-width:1.5;"/><line style="stroke:#222222;stroke-width:2.5;" x1="84.0628" x2="96.4372" y1="314.9534" y2="327.3278"/><line style="stroke:#222222;stroke-width:2.5;" x1="96.4372" x2="84.0628" y1="314.9534" y2="327.3278"/><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#222222;stroke-width:0.5;" width="331" x="135.25" y="257.1719"/><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" text-decoration="underline" textLength="48" x="145.25" y="278.3105">Validate</text><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="4" x="193.25" y="278.3105"> </text><text fill="#000000" font-family="sans" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="76" x="197.25" y="278.3105">Credential</text><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="43" x="277.25" y="278.3105">against</text><text fill="#000000" font-family="sans" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="132" x="324.25" y="278.3105">Definition Schema</text><polygon fill="#F1F1F1" points="212.75,311.1406,388.75,311.1406,400.75,323.1406,388.75,335.1406,212.75,335.1406,200.75,323.1406,212.75,311.1406" style="stroke:#222222;stroke-width:0.5;"/><text fill="#000000" font-family="sans" font-size="11" lengthAdjust="spacing" textLength="176" x="212.75" y="326.9487">Credential match the schema?</text><text fill="#000000" font-family="sans" font-size="11" lengthAdjust="spacing" textLength="14" x="186.75" y="320.5464">no</text><text fill="#000000" font-family="sans" font-size="11" lengthAdjust="spacing" textLength="21" x="400.75" y="320.5464">yes</text><rect fill="#FFC0CB" height="33.9688" rx="12.5" ry="12.5" style="stroke:#222222;stroke-width:0.5;" width="50" x="165.75" y="345.1406"/><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="30" x="175.75" y="366.2793">Error</text><ellipse cx="190.75" cy="423.0781" fill="none" rx="10" ry="10" style="stroke:#222222;stroke-width:1.5;"/><line style="stroke:#222222;stroke-width:2.5;" x1="184.5628" x2="196.9372" y1="416.8909" y2="429.2653"/><line style="stroke:#222222;stroke-width:2.5;" x1="196.9372" x2="184.5628" y1="416.8909" y2="429.2653"/><rect fill="#FFFFFF" height="47.9375" rx="12.5" ry="12.5" style="stroke:#222222;stroke-width:0.5;" width="148" x="336.75" y="345.1406"/><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" text-decoration="underline" textLength="41" x="346.75" y="366.2793">Extract</text><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="4" x="387.75" y="366.2793"> </text><text fill="#000000" font-family="sans" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="83" x="391.75" y="366.2793">Subject DID</text><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="93" x="346.75" y="380.248">from Credential</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#222222;stroke-width:0.5;" width="178" x="321.75" y="427.0469"/><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" text-decoration="underline" textLength="48" x="331.75" y="448.1855">Resolve</text><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="19" x="383.75" y="448.1855">the</text><text fill="#000000" font-family="sans" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="83" x="406.75" y="448.1855">Subject DID</text><polygon fill="#F1F1F1" points="360.25,481.0156,461.25,481.0156,473.25,493.0156,461.25,505.0156,360.25,505.0156,348.25,493.0156,360.25,481.0156" style="stroke:#222222;stroke-width:0.5;"/><text fill="#000000" font-family="sans" font-size="11" lengthAdjust="spacing" textLength="101" x="360.25" y="496.8237">Can be resolved?</text><text fill="#000000" font-family="sans" font-size="11" lengthAdjust="spacing" textLength="14" x="334.25" y="490.4214">no</text><text fill="#000000" font-family="sans" font-size="11" lengthAdjust="spacing" textLength="21" x="473.25" y="490.4214">yes</text><rect fill="#FFC0CB" height="33.9688" rx="12.5" ry="12.5" style="stroke:#222222;stroke-width:0.5;" width="50" x="287.4375" y="515.0156"/><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="30" x="297.4375" y="536.1543">Error</text><ellipse cx="312.4375" cy="592.9531" fill="none" rx="10" ry="10" style="stroke:#222222;stroke-width:1.5;"/><line style="stroke:#222222;stroke-width:2.5;" x1="306.2503" x2="318.6247" y1="586.7659" y2="599.1403"/><line style="stroke:#222222;stroke-width:2.5;" x1="318.6247" x2="306.2503" y1="586.7659" y2="599.1403"/><rect fill="#FFFFFF" height="47.9375" rx="12.5" ry="12.5" style="stroke:#222222;stroke-width:0.5;" width="161" x="428.5625" y="515.0156"/><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" text-decoration="underline" textLength="41" x="438.5625" y="536.1543">Extract</text><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="19" x="483.5625" y="536.1543">the</text><text fill="#000000" font-family="sans" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="73" x="506.5625" y="536.1543">Issuer DID</text><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="93" x="438.5625" y="550.123">from Credential</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#222222;stroke-width:0.5;" width="168" x="425.0625" y="596.9219"/><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" text-decoration="underline" textLength="48" x="435.0625" y="618.0605">Resolve</text><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="19" x="487.0625" y="618.0605">the</text><text fill="#000000" font-family="sans" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="73" x="510.0625" y="618.0605">Issuer DID</text><polygon fill="#F1F1F1" points="458.5625,650.8906,559.5625,650.8906,571.5625,662.8906,559.5625,674.8906,458.5625,674.8906,446.5625,662.8906,458.5625,650.8906" style="stroke:#222222;stroke-width:0.5;"/><text fill="#000000" font-family="sans" font-size="11" lengthAdjust="spacing" textLength="101" x="458.5625" y="666.6987">Can be resolved?</text><text fill="#000000" font-family="sans" font-size="11" lengthAdjust="spacing" textLength="14" x="432.5625" y="660.2964">no</text><text fill="#000000" font-family="sans" font-size="11" lengthAdjust="spacing" textLength="21" x="571.5625" y="660.2964">yes</text><rect fill="#FFC0CB" height="33.9688" rx="12.5" ry="12.5" style="stroke:#222222;stroke-width:0.5;" width="50" x="367.4375" y="684.8906"/><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="30" x="377.4375" y="706.0293">Error</text><ellipse cx="392.4375" cy="762.8281" fill="none" rx="10" ry="10" style="stroke:#222222;stroke-width:1.5;"/><line style="stroke:#222222;stroke-width:2.5;" x1="386.2503" x2="398.6247" y1="756.6409" y2="769.0153"/><line style="stroke:#222222;stroke-width:2.5;" x1="398.6247" x2="386.2503" y1="756.6409" y2="769.0153"/><rect fill="#FFFFFF" height="47.9375" rx="12.5" ry="12.5" style="stroke:#222222;stroke-width:0.5;" width="113" x="569.1875" y="684.8906"/><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" text-decoration="underline" textLength="41" x="579.1875" y="706.0293">Extract</text><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="4" x="620.1875" y="706.0293"> </text><text fill="#000000" font-family="sans" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="41" x="624.1875" y="706.0293">Proof</text><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="93" x="579.1875" y="719.998">from Credential</text><rect fill="#FFFFFF" height="47.9375" rx="12.5" ry="12.5" style="stroke:#222222;stroke-width:0.5;" width="137" x="557.1875" y="766.7969"/><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" text-decoration="underline" textLength="41" x="567.1875" y="787.9355">Extract</text><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="4" x="608.1875" y="787.9355"> </text><text fill="#000000" font-family="sans" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="72" x="612.1875" y="787.9355">Signature</text><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="63" x="567.1875" y="801.9043">from Proof</text><rect fill="#FFFFFF" height="47.9375" rx="12.5" ry="12.5" style="stroke:#222222;stroke-width:0.5;" width="278" x="486.6875" y="834.7344"/><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" text-decoration="underline" textLength="41" x="496.6875" y="855.873">Extract</text><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="4" x="537.6875" y="855.873"> </text><text fill="#000000" font-family="sans" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="213" x="541.6875" y="855.873">Verification Method ID (VmID)</text><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="63" x="496.6875" y="869.8418">from Proof</text><rect fill="#FFFFFF" height="61.9063" rx="12.5" ry="12.5" style="stroke:#222222;stroke-width:0.5;" width="269" x="491.1875" y="902.6719"/><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" text-decoration="underline" textLength="77" x="501.1875" y="923.8105">Dereference</text><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="19" x="582.1875" y="923.8105">the</text><text fill="#000000" font-family="sans" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="145" x="605.1875" y="923.8105">Verification Method</text><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="181" x="501.1875" y="937.7793">from the Issuer DID document</text><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="55" x="501.1875" y="951.748">using the</text><text fill="#000000" font-family="sans" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="35" x="560.1875" y="951.748">VmID</text><polygon fill="#F1F1F1" points="560.6875,984.5781,690.6875,984.5781,702.6875,996.5781,690.6875,1008.5781,560.6875,1008.5781,548.6875,996.5781,560.6875,984.5781" style="stroke:#222222;stroke-width:0.5;"/><text fill="#000000" font-family="sans" font-size="11" lengthAdjust="spacing" textLength="130" x="560.6875" y="1000.3862">Can be dereferenced?</text><text fill="#000000" font-family="sans" font-size="11" lengthAdjust="spacing" textLength="14" x="534.6875" y="993.9839">no</text><text fill="#000000" font-family="sans" font-size="11" lengthAdjust="spacing" textLength="21" x="702.6875" y="993.9839">yes</text><rect fill="#FFC0CB" height="33.9688" rx="12.5" ry="12.5" style="stroke:#222222;stroke-width:0.5;" width="50" x="447.4375" y="1018.5781"/><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="30" x="457.4375" y="1039.7168">Error</text><ellipse cx="472.4375" cy="1097.5469" fill="none" rx="10" ry="10" style="stroke:#222222;stroke-width:1.5;"/><line style="stroke:#222222;stroke-width:2.5;" x1="466.2503" x2="478.6247" y1="1091.3597" y2="1103.7341"/><line style="stroke:#222222;stroke-width:2.5;" x1="478.6247" x2="466.2503" y1="1091.3597" y2="1103.7341"/><polygon fill="#F1F1F1" points="574.4375,1018.5781,983.4375,1018.5781,995.4375,1030.5781,983.4375,1042.5781,574.4375,1042.5781,562.4375,1030.5781,574.4375,1018.5781" style="stroke:#222222;stroke-width:0.5;"/><text fill="#000000" font-family="sans" font-size="11" lengthAdjust="spacing" textLength="409" x="574.4375" y="1034.3862">VerificationRelationships(VmID) ∩ (Authentication,AssertionMethod) ≠ ∅</text><text fill="#000000" font-family="sans" font-size="11" lengthAdjust="spacing" textLength="14" x="548.4375" y="1027.9839">no</text><text fill="#000000" font-family="sans" font-size="11" lengthAdjust="spacing" textLength="21" x="995.4375" y="1027.9839">yes</text><rect fill="#FFC0CB" height="33.9688" rx="12.5" ry="12.5" style="stroke:#222222;stroke-width:0.5;" width="50" x="527.4375" y="1052.5781"/><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="30" x="537.4375" y="1073.7168">Error</text><ellipse cx="552.4375" cy="1131.5469" fill="none" rx="10" ry="10" style="stroke:#222222;stroke-width:1.5;"/><line style="stroke:#222222;stroke-width:2.5;" x1="546.2503" x2="558.6247" y1="1125.3597" y2="1137.7341"/><line style="stroke:#222222;stroke-width:2.5;" x1="558.6247" x2="546.2503" y1="1125.3597" y2="1137.7341"/><rect fill="#FFFFFF" height="47.9375" rx="12.5" ry="12.5" style="stroke:#222222;stroke-width:0.5;" width="210" x="900.4375" y="1052.5781"/><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" text-decoration="underline" textLength="41" x="910.4375" y="1073.7168">Extract</text><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="19" x="955.4375" y="1073.7168">the</text><text fill="#000000" font-family="sans" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="122" x="978.4375" y="1073.7168">Issuer Public Key</text><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="171" x="910.4375" y="1087.6855">from the Verification Method</text><polygon fill="#F1F1F1" points="952.4375,1135.5156,1058.4375,1135.5156,1070.4375,1147.5156,1058.4375,1159.5156,952.4375,1159.5156,940.4375,1147.5156,952.4375,1135.5156" style="stroke:#222222;stroke-width:0.5;"/><text fill="#000000" font-family="sans" font-size="11" lengthAdjust="spacing" textLength="106" x="952.4375" y="1151.3237">Can be extracted?</text><text fill="#000000" font-family="sans" font-size="11" lengthAdjust="spacing" textLength="14" x="926.4375" y="1144.9214">no</text><text fill="#000000" font-family="sans" font-size="11" lengthAdjust="spacing" textLength="21" x="1070.4375" y="1144.9214">yes</text><rect fill="#FFC0CB" height="33.9688" rx="12.5" ry="12.5" style="stroke:#222222;stroke-width:0.5;" width="50" x="885.6875" y="1169.5156"/><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="30" x="895.6875" y="1190.6543">Error</text><ellipse cx="910.6875" cy="1233.4844" fill="none" rx="10" ry="10" style="stroke:#222222;stroke-width:1.5;"/><line style="stroke:#222222;stroke-width:2.5;" x1="904.5003" x2="916.8747" y1="1227.2972" y2="1239.6716"/><line style="stroke:#222222;stroke-width:2.5;" x1="916.8747" x2="904.5003" y1="1227.2972" y2="1239.6716"/><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke:#222222;stroke-width:0.5;" width="154" x="1023.1875" y="1169.5156"/><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" text-decoration="underline" textLength="35" x="1033.1875" y="1190.6543">Verify</text><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="19" x="1072.1875" y="1190.6543">the</text><text fill="#000000" font-family="sans" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="72" x="1095.1875" y="1190.6543">Signature</text><polygon fill="#F1F1F1" points="1012.6875,1223.4844,1187.6875,1223.4844,1199.6875,1235.4844,1187.6875,1247.4844,1012.6875,1247.4844,1000.6875,1235.4844,1012.6875,1223.4844" style="stroke:#222222;stroke-width:0.5;"/><text fill="#000000" font-family="sans" font-size="11" lengthAdjust="spacing" textLength="175" x="1012.6875" y="1239.2925">Signature matches Public key?</text><text fill="#000000" font-family="sans" font-size="11" lengthAdjust="spacing" textLength="14" x="986.6875" y="1232.8901">no</text><text fill="#000000" font-family="sans" font-size="11" lengthAdjust="spacing" textLength="21" x="1199.6875" y="1232.8901">yes</text><rect fill="#FFC0CB" height="33.9688" rx="12.5" ry="12.5" style="stroke:#222222;stroke-width:0.5;" width="50" x="965.6875" y="1257.4844"/><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="30" x="975.6875" y="1278.623">Error</text><ellipse cx="990.6875" cy="1321.4531" fill="none" rx="10" ry="10" style="stroke:#222222;stroke-width:1.5;"/><line style="stroke:#222222;stroke-width:2.5;" x1="984.5003" x2="996.8747" y1="1315.2659" y2="1327.6403"/><line style="stroke:#222222;stroke-width:2.5;" x1="996.8747" x2="984.5003" y1="1315.2659" y2="1327.6403"/><rect fill="#98FB98" height="33.9688" rx="12.5" ry="12.5" style="stroke:#222222;stroke-width:0.5;" width="124" x="1147.6875" y="1257.4844"/><text fill="#000000" font-family="sans" font-size="12" lengthAdjust="spacing" textLength="104" x="1157.6875" y="1278.623">Persist credential</text><ellipse cx="1209.6875" cy="1322.4531" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="1209.6875" cy="1322.4531" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="195.5" x2="195.5" y1="67.2969" y2="87.2969"/><polygon fill="#222222" points="191.5,77.2969,195.5,87.2969,199.5,77.2969,195.5,81.2969" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="195.5" x2="195.5" y1="149.2031" y2="169.2031"/><polygon fill="#222222" points="191.5,159.2031,195.5,169.2031,199.5,159.2031,195.5,163.2031" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="90.25" x2="90.25" y1="291.1406" y2="311.1406"/><polygon fill="#222222" points="86.25,301.1406,90.25,311.1406,94.25,301.1406,90.25,305.1406" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="190.75" x2="190.75" y1="379.1094" y2="413.0781"/><polygon fill="#222222" points="186.75,403.0781,190.75,413.0781,194.75,403.0781,190.75,407.0781" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="410.75" x2="410.75" y1="393.0781" y2="427.0469"/><polygon fill="#222222" points="406.75,417.0469,410.75,427.0469,414.75,417.0469,410.75,421.0469" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="312.4375" x2="312.4375" y1="548.9844" y2="582.9531"/><polygon fill="#222222" points="308.4375,572.9531,312.4375,582.9531,316.4375,572.9531,312.4375,576.9531" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="509.0625" x2="509.0625" y1="562.9531" y2="596.9219"/><polygon fill="#222222" points="505.0625,586.9219,509.0625,596.9219,513.0625,586.9219,509.0625,590.9219" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="392.4375" x2="392.4375" y1="718.8594" y2="752.8281"/><polygon fill="#222222" points="388.4375,742.8281,392.4375,752.8281,396.4375,742.8281,392.4375,746.8281" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="625.6875" x2="625.6875" y1="732.8281" y2="766.7969"/><polygon fill="#222222" points="621.6875,756.7969,625.6875,766.7969,629.6875,756.7969,625.6875,760.7969" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="625.6875" x2="625.6875" y1="814.7344" y2="834.7344"/><polygon fill="#222222" points="621.6875,824.7344,625.6875,834.7344,629.6875,824.7344,625.6875,828.7344" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="625.6875" x2="625.6875" y1="882.6719" y2="902.6719"/><polygon fill="#222222" points="621.6875,892.6719,625.6875,902.6719,629.6875,892.6719,625.6875,896.6719" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="472.4375" x2="472.4375" y1="1052.5469" y2="1087.5469"/><polygon fill="#222222" points="468.4375,1077.5469,472.4375,1087.5469,476.4375,1077.5469,472.4375,1081.5469" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="552.4375" x2="552.4375" y1="1086.5469" y2="1121.5469"/><polygon fill="#222222" points="548.4375,1111.5469,552.4375,1121.5469,556.4375,1111.5469,552.4375,1115.5469" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="910.6875" x2="910.6875" y1="1203.4844" y2="1223.4844"/><polygon fill="#222222" points="906.6875,1213.4844,910.6875,1223.4844,914.6875,1213.4844,910.6875,1217.4844" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="990.6875" x2="990.6875" y1="1291.4531" y2="1311.4531"/><polygon fill="#222222" points="986.6875,1301.4531,990.6875,1311.4531,994.6875,1301.4531,990.6875,1305.4531" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="1209.6875" x2="1209.6875" y1="1291.4531" y2="1311.4531"/><polygon fill="#222222" points="1205.6875,1301.4531,1209.6875,1311.4531,1213.6875,1301.4531,1209.6875,1305.4531" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="1000.6875" x2="990.6875" y1="1235.4844" y2="1235.4844"/><line style="stroke:#222222;stroke-width:1.0;" x1="990.6875" x2="990.6875" y1="1235.4844" y2="1257.4844"/><polygon fill="#222222" points="986.6875,1247.4844,990.6875,1257.4844,994.6875,1247.4844,990.6875,1251.4844" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="1199.6875" x2="1209.6875" y1="1235.4844" y2="1235.4844"/><line style="stroke:#222222;stroke-width:1.0;" x1="1209.6875" x2="1209.6875" y1="1235.4844" y2="1257.4844"/><polygon fill="#222222" points="1205.6875,1247.4844,1209.6875,1257.4844,1213.6875,1247.4844,1209.6875,1251.4844" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="1100.1875" x2="1100.1875" y1="1203.4844" y2="1223.4844"/><polygon fill="#222222" points="1096.1875,1213.4844,1100.1875,1223.4844,1104.1875,1213.4844,1100.1875,1217.4844" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="940.4375" x2="910.6875" y1="1147.5156" y2="1147.5156"/><line style="stroke:#222222;stroke-width:1.0;" x1="910.6875" x2="910.6875" y1="1147.5156" y2="1169.5156"/><polygon fill="#222222" points="906.6875,1159.5156,910.6875,1169.5156,914.6875,1159.5156,910.6875,1163.5156" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="1070.4375" x2="1100.1875" y1="1147.5156" y2="1147.5156"/><line style="stroke:#222222;stroke-width:1.0;" x1="1100.1875" x2="1100.1875" y1="1147.5156" y2="1169.5156"/><polygon fill="#222222" points="1096.1875,1159.5156,1100.1875,1169.5156,1104.1875,1159.5156,1100.1875,1163.5156" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="1005.4375" x2="1005.4375" y1="1100.5156" y2="1135.5156"/><polygon fill="#222222" points="1001.4375,1125.5156,1005.4375,1135.5156,1009.4375,1125.5156,1005.4375,1129.5156" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="562.4375" x2="552.4375" y1="1030.5781" y2="1030.5781"/><line style="stroke:#222222;stroke-width:1.0;" x1="552.4375" x2="552.4375" y1="1030.5781" y2="1052.5781"/><polygon fill="#222222" points="548.4375,1042.5781,552.4375,1052.5781,556.4375,1042.5781,552.4375,1046.5781" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="995.4375" x2="1005.4375" y1="1030.5781" y2="1030.5781"/><line style="stroke:#222222;stroke-width:1.0;" x1="1005.4375" x2="1005.4375" y1="1030.5781" y2="1052.5781"/><polygon fill="#222222" points="1001.4375,1042.5781,1005.4375,1052.5781,1009.4375,1042.5781,1005.4375,1046.5781" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="548.6875" x2="472.4375" y1="996.5781" y2="996.5781"/><line style="stroke:#222222;stroke-width:1.0;" x1="472.4375" x2="472.4375" y1="996.5781" y2="1018.5781"/><polygon fill="#222222" points="468.4375,1008.5781,472.4375,1018.5781,476.4375,1008.5781,472.4375,1012.5781" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="702.6875" x2="778.9375" y1="996.5781" y2="996.5781"/><line style="stroke:#222222;stroke-width:1.0;" x1="778.9375" x2="778.9375" y1="996.5781" y2="1018.5781"/><polygon fill="#222222" points="774.9375,1008.5781,778.9375,1018.5781,782.9375,1008.5781,778.9375,1012.5781" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="625.6875" x2="625.6875" y1="964.5781" y2="984.5781"/><polygon fill="#222222" points="621.6875,974.5781,625.6875,984.5781,629.6875,974.5781,625.6875,978.5781" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="446.5625" x2="392.4375" y1="662.8906" y2="662.8906"/><line style="stroke:#222222;stroke-width:1.0;" x1="392.4375" x2="392.4375" y1="662.8906" y2="684.8906"/><polygon fill="#222222" points="388.4375,674.8906,392.4375,684.8906,396.4375,674.8906,392.4375,678.8906" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="571.5625" x2="625.6875" y1="662.8906" y2="662.8906"/><line style="stroke:#222222;stroke-width:1.0;" x1="625.6875" x2="625.6875" y1="662.8906" y2="684.8906"/><polygon fill="#222222" points="621.6875,674.8906,625.6875,684.8906,629.6875,674.8906,625.6875,678.8906" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="509.0625" x2="509.0625" y1="630.8906" y2="650.8906"/><polygon fill="#222222" points="505.0625,640.8906,509.0625,650.8906,513.0625,640.8906,509.0625,644.8906" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="348.25" x2="312.4375" y1="493.0156" y2="493.0156"/><line style="stroke:#222222;stroke-width:1.0;" x1="312.4375" x2="312.4375" y1="493.0156" y2="515.0156"/><polygon fill="#222222" points="308.4375,505.0156,312.4375,515.0156,316.4375,505.0156,312.4375,509.0156" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="473.25" x2="509.0625" y1="493.0156" y2="493.0156"/><line style="stroke:#222222;stroke-width:1.0;" x1="509.0625" x2="509.0625" y1="493.0156" y2="515.0156"/><polygon fill="#222222" points="505.0625,505.0156,509.0625,515.0156,513.0625,505.0156,509.0625,509.0156" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="410.75" x2="410.75" y1="461.0156" y2="481.0156"/><polygon fill="#222222" points="406.75,471.0156,410.75,481.0156,414.75,471.0156,410.75,475.0156" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="200.75" x2="190.75" y1="323.1406" y2="323.1406"/><line style="stroke:#222222;stroke-width:1.0;" x1="190.75" x2="190.75" y1="323.1406" y2="345.1406"/><polygon fill="#222222" points="186.75,335.1406,190.75,345.1406,194.75,335.1406,190.75,339.1406" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="400.75" x2="410.75" y1="323.1406" y2="323.1406"/><line style="stroke:#222222;stroke-width:1.0;" x1="410.75" x2="410.75" y1="323.1406" y2="345.1406"/><polygon fill="#222222" points="406.75,335.1406,410.75,345.1406,414.75,335.1406,410.75,339.1406" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="300.75" x2="300.75" y1="291.1406" y2="311.1406"/><polygon fill="#222222" points="296.75,301.1406,300.75,311.1406,304.75,301.1406,300.75,305.1406" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="134" x2="90.25" y1="235.1719" y2="235.1719"/><line style="stroke:#222222;stroke-width:1.0;" x1="90.25" x2="90.25" y1="235.1719" y2="257.1719"/><polygon fill="#222222" points="86.25,247.1719,90.25,257.1719,94.25,247.1719,90.25,251.1719" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="257" x2="300.75" y1="235.1719" y2="235.1719"/><line style="stroke:#222222;stroke-width:1.0;" x1="300.75" x2="300.75" y1="235.1719" y2="257.1719"/><polygon fill="#222222" points="296.75,247.1719,300.75,257.1719,304.75,247.1719,300.75,251.1719" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="195.5" x2="195.5" y1="203.1719" y2="223.1719"/><polygon fill="#222222" points="191.5,213.1719,195.5,223.1719,199.5,213.1719,195.5,217.1719" style="stroke:#222222;stroke-width:1.0;"/><rect fill="none" height="11.6406" style="stroke:none;stroke-width:1.0;" width="301" x="489.3438" y="1332.4531"/><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="301" x="489.3438" y="1341.7354">Elesto Protocol: https://github.com/allinbits/cosmos-cash</text><!--MD5=[a28688e5a025e61ee73b344aeeb20dd0]
@startuml
title Public Credential Verification
footer Elesto Protocol: https://github.com/allinbits/cosmos-cash

<style>
activityDiagram {
  LineColor #222
  FontName sans
}
</style>
skinparam monochrome false
skinparam shadowing false

start
#white:Receive message MsgIssuePublicVerifiableCredential with
**CredentialDefinitionID**  
**Credential**;
#white:__Query__ **CredentialDefinitionID**;
if (Definition exists?) then (no)
    #pink:Error;
    end
else (yes)
    #white:__Validate__ **Credential** against **Definition Schema**;
    if (Credential match the schema?) then (no)
        #pink:Error;
        end
    else (yes)
        #white:__Extract__ **Subject DID**
        from Credential;
        #white:__Resolve__ the **Subject DID**;
        if (Can be resolved?) then (no)
            #pink:Error;
            end
        else (yes)
            #white:__Extract__ the **Issuer DID**
            from Credential;
            #white:__Resolve__ the **Issuer DID**;
            if (Can be resolved?) then (no)
                #pink:Error;
                end
            else (yes)
                #white:__Extract__ **Proof**
                from Credential;
                #white:__Extract__ **Signature**
                from Proof;
                #white:__Extract__ **Verification Method ID (VmID)**
                from Proof;
                #white:__Dereference__ the **Verification Method**
                from the Issuer DID document
                using the **VmID**;
                if (Can be dereferenced?) then (no)
                    #pink:Error;
                    end
                else (yes)
                    if (VerificationRelationships(VmID) ∩ (Authentication,AssertionMethod) ≠ ∅) then (no)
                        #pink:Error;
                        end
                    else (yes)
                        #white:__Extract__ the **Issuer Public Key**
                        from the Verification Method;
                        if (Can be extracted?) then (no)
                            #pink:Error;
                            end
                        else (yes)
                        #white:__Verify__ the **Signature**;
                        if (Signature matches Public key?) then (no)
                            #pink:Error;
                            end
                        else (yes)
                            #palegreen:Persist credential;
                            stop
                        endif
                    endif
                endif
            endif
        endif
    endif
endif
@enduml

PlantUML version 1.2022.13beta1(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>